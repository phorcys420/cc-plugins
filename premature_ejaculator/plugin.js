(function(a,o,g){"use strict";var p={name:"elrick",description:"el ricko",handler:()=>`https://${(Math.random()+1).toString(36).substring(7)}.elrick.fans`};const{showToast:l}=g.findByProps("showToast");async function m(t){if(DiscordNative)DiscordNative.clipboard.copy(t);else try{await navigator.clipboard.writeText(t)}catch(e){l({message:"Could not copy to clipboard ! :(",id:"clipboard_error",type:2}),o.logger.error("[PrematureEjaculator]","Could not copy text",e)}}async function i(){let t=[];for(const[e,r]of Object.entries(cumcord.plugins.installed.store||{})){let n={url:e,enabled:r.enabled},d=await cumcord.modules.internal.idbKeyval.get(`${e}_CUMCORD_STORE`);d&&(n.settings=d),t.push(n)}return t}async function f(t){for(let e of t)if(e.settings&&await cumcord.modules.internal.idbKeyval.set(`${e.url}_CUMCORD_STORE`,e.settings),cumcord.plugins.installed.ghost[e.url])try{cumcord.plugins.togglePlugin(e.url),cumcord.plugins.togglePlugin(e.url)}catch(r){o.logger.error("[PrematureEjaculator]","Could not reload plugin",e.url,r),l({message:`Could not reload ${e.url}, check the console.`,id:e.url,type:2})}else{try{await cumcord.plugins.importPlugin(e.url)}catch(r){o.logger.error("[PrematureEjaculator]","Could not load plugin",e.url,r),l({message:`Could not load ${e.url}, check the console.`,id:e.url,type:2})}e.enabled==!1&&cumcord.plugins.togglePlugin(e.url)}}function u(t){return`(${f})(${JSON.stringify(t)})`}var y={name:"export",description:"Exports your Cumcord settings",args:[{name:"ugly",description:"Exports the settings in a non-pretty format",type:"bool",required:!1},{name:"snippet",description:"Exports the settings in devtools-loadable format",type:"bool",required:!1}],handler:async(t,e)=>{let r=await i();if(t.args.snippet){let n=u(r);t.args.ugly&&(n+=`
// mean :(`),e(`\`\`\`js
${n}\`\`\``)}else e(`\`\`\`json
${JSON.stringify(r,null,t.args.ugly?null:"      ")}\`\`\``)}};function s(t,e){let r=`PREMATURE_EJACULATOR_${t.replaceAll(" ","_").toUpperCase()}`;return commandPalette.registerEntry({id:r,label:t,source:"Premature Ejaculator",icon:"\u{1F4DC}",action:e}),()=>commandPalette.unregisterEntry(r)}async function c(t=!1){let e=await i();return m(t?u(e):JSON.stringify(e,null,"      "))}function C(){return commandPalette?(o.logger.log("[PrematureEjaculator]","Loading command palette entries..."),[s("Export as snippet",()=>c(!0)),s("Export as JSON",c)]):(o.logger.log("[PrematureEjaculator]","Command palette plugin not found, will not add entries."),[])}var E=()=>{let t=[a.addCommand(p),a.addCommand(y),...C()];return{onUnload(){t.forEach(e=>e())}}};return E})(cumcord.commands,cumcord.utils,cumcord.modules.webpack);
