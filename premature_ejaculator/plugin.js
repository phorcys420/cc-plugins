(function(s,f,u,O,n){"use strict";var h={name:"elrick",description:"el ricko",handler:()=>`https://${(Math.random()+1).toString(36).substring(7)}.elrick.fans`};const{showToast:c}=f.findByProps("showToast");async function E(t){if(DiscordNative)DiscordNative.clipboard.copy(t);else try{await navigator.clipboard.writeText(t)}catch(o){u.logger.error("[PrematureEjaculator]","Could not copy text",o),c({message:"Could not copy to clipboard! :(",id:"clipboard_error",type:2})}}async function d(){let t=[];for(const[o,e]of Object.entries(cumcord.plugins.installed.store||{})){let r={url:o,enabled:e.enabled},l=await cumcord.modules.internal.idbKeyval.get(`${o}_CUMCORD_STORE`);l&&(r.settings=l),t.push(r)}return t}async function P(t,o=c){for(let e of t)if(e.settings&&await cumcord.modules.internal.idbKeyval.set(`${e.url}_CUMCORD_STORE`,e.settings),cumcord.plugins.installed.ghost[e.url])try{cumcord.plugins.togglePlugin(e.url),cumcord.plugins.togglePlugin(e.url)}catch(r){cumcord.utils.logger.error("[PrematureEjaculator]","Could not reload plugin",e.url,r),o({message:`Could not reload ${e.url}, check the console.`,id:e.url,type:2})}else{try{await cumcord.plugins.importPlugin(e.url)}catch(r){cumcord.utils.logger.error("[PrematureEjaculator]","Could not load plugin",e.url,r),o({message:`Could not load ${e.url}, check the console.`,id:e.url,type:2})}e.enabled==!1&&cumcord.plugins.togglePlugin(e.url)}}function g(t){return`(${P})(${JSON.stringify(t)}, cumcord.modules.webpack.findByProps("showToast").showToast)`}var C={name:"export",description:"Exports your Cumcord settings",args:[{name:"ugly",description:"Exports the settings in a non-pretty format",type:"bool",required:!1},{name:"snippet",description:"Exports the settings in devtools-loadable format",type:"bool",required:!1}],handler:async(t,o)=>{let e=await d();if(t.args.snippet){let r=g(e);t.args.ugly&&(r+=`
// mean :(`),o(`\`\`\`js
${r}\`\`\``)}else o(`\`\`\`json
${JSON.stringify(e,null,t.args.ugly?null:"      ")}\`\`\``)}},b=(t,o)=>{let e=t.some(a=>n.loaded.ghost.hasOwnProperty(a))?o():null;const r=(a,{path:i})=>{t.includes(i[0])&&(e?.(),e=o())},l=(a,{path:i})=>{t.includes(i[0])&&(e?.(),e=null)};return n.loaded.on("SET",r),n.loaded.on("DELETE",l),()=>{e?.(),n.loaded.off("SET",r),n.loaded.off("DELETE",l)}};const w=["https://yellowsink.github.io/discord-command-palette/","https://cumcordplugins.github.io/Condom/yellowsink.github.io/discord-command-palette/"],p="Premature Ejaculator";function m(t,o){let e=`PREMATURE_EJACULATOR_${t.replaceAll(" ","_").toUpperCase()}`;return commandPalette.registerEntry({id:e,label:t,source:p,icon:"\u{1F4DC}",action:o}),()=>commandPalette.unregisterEntry(e)}async function y(t=!1){let o=await d();return E(t?g(o):JSON.stringify(o,null,"      "))}function T(){return u.logger.log("[PrematureEjaculator]","Adding command palette entries"),m("Export as snippet",()=>y(!0)),m("Export as JSON",y),()=>window.commandPalette?.unregisterSource(p)}var v=()=>b(w,T),k=()=>{let t=[s.addCommand(h),s.addCommand(C),v()];return{onUnload(){t.forEach(o=>o())}}};return k})(cumcord.commands,cumcord.modules.webpack,cumcord.utils,cumcord.pluginData,cumcord.plugins);
