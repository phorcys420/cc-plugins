(function(l,d,n){"use strict";var g={name:"elrick",description:"el ricko",handler:()=>`https://${(Math.random()+1).toString(36).substring(7)}.elrick.fans`};const{showToast:p}=d.findByProps("showToast");async function m(t){if(DiscordNative)DiscordNative.clipboard.copy(t);else try{await navigator.clipboard.writeText(t)}catch(r){p({message:"Could not copy to clipboard ! :(",id:"clipboard_error",type:2}),n.logger.error("[PrematureEjaculator]","Could not copy text",r)}}async function a(){let t=[];for(const[r,e]of Object.entries(cumcord.plugins.installed.store||{})){let o={url:r,enabled:e.enabled},c=await cumcord.modules.internal.idbKeyval.get(`${r}_CUMCORD_STORE`);c&&(o.settings=c),t.push(o)}return t}async function f(t,r=r){for(let e of t)if(e.settings&&await cumcord.modules.internal.idbKeyval.set(`${e.url}_CUMCORD_STORE`,e.settings),cumcord.plugins.installed.ghost[e.url])try{cumcord.plugins.togglePlugin(e.url),cumcord.plugins.togglePlugin(e.url)}catch(o){cumcord.utils.logger.error("[PrematureEjaculator]","Could not reload plugin",e.url,o),r({message:`Could not reload ${e.url}, check the console.`,id:e.url,type:2})}else{try{await cumcord.plugins.importPlugin(e.url)}catch(o){cumcord.utils.logger.error("[PrematureEjaculator]","Could not load plugin",e.url,o),r({message:`Could not load ${e.url}, check the console.`,id:e.url,type:2})}e.enabled==!1&&cumcord.plugins.togglePlugin(e.url)}}function i(t){return`(${f})(${JSON.stringify(t)}, cumcord.modules.webpack.findByProps("showToast").showToast)`}var y={name:"export",description:"Exports your Cumcord settings",args:[{name:"ugly",description:"Exports the settings in a non-pretty format",type:"bool",required:!1},{name:"snippet",description:"Exports the settings in devtools-loadable format",type:"bool",required:!1}],handler:async(t,r)=>{let e=await a();if(t.args.snippet){let o=i(e);t.args.ugly&&(o+=`
// mean :(`),r(`\`\`\`js
${o}\`\`\``)}else r(`\`\`\`json
${JSON.stringify(e,null,t.args.ugly?null:"      ")}\`\`\``)}};function u(t,r){let e=`PREMATURE_EJACULATOR_${t.replaceAll(" ","_").toUpperCase()}`;return commandPalette.registerEntry({id:e,label:t,source:"Premature Ejaculator",icon:"\u{1F4DC}",action:r}),()=>commandPalette.unregisterEntry(e)}async function s(t=!1){let r=await a();return m(t?i(r):JSON.stringify(r,null,"      "))}function C(){return commandPalette?(n.logger.log("[PrematureEjaculator]","Loading command palette entries..."),[u("Export as snippet",()=>s(!0)),u("Export as JSON",s)]):(n.logger.log("[PrematureEjaculator]","Command palette plugin not found, will not add entries."),[])}var E=()=>{let t=[l.addCommand(g),l.addCommand(y),...C()];return{onUnload(){t.forEach(r=>r())}}};return E})(cumcord.commands,cumcord.modules.webpack,cumcord.utils);
